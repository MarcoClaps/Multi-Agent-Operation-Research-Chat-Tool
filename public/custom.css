/* ===========================================
   Custom CSS for OR Assistant - Chainlit App
   Orange Theme with Soft, Modern Design
   =========================================== */

/* ----- Google Fonts Import ----- */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

/* ----- Hide Chainlit Branding ----- */
a[href*="chainlit.io"],
a[href*="github.com/Chainlit"],
[class*="watermark"],
[data-testid="watermark"],
.MuiTypography-root:has(a[href*="chainlit"]),
div:has(> a[href*="chainlit.io"]),
img[alt*="chainlit" i],
img[alt*="Chainlit" i],
img[src*="chainlit" i],
.powered-by,
[class*="poweredBy"],
[class*="powered-by"] {
    display: none !important;
    visibility: hidden !important;
}

/* ----- Color Scheme & Theme (LIGHT MODE) ----- */
:root {
    /* Orange palette - warm and professional */
    --primary-50: #fff7ed;
    --primary-100: #ffedd5;
    --primary-200: #fed7aa;
    --primary-300: #fdba74;
    --primary-400: #fb923c;
    --primary-500: #f97316;
    --primary-600: #ea580c;
    --primary-700: #c2410c;
    
    /* Main colors */
    --primary-color: #f97316;
    --primary-hover: #ea580c;
    --primary-light: #fb923c;
    --primary-subtle: #fff7ed;
    
    /* Neutral palette */
    --gray-50: #fafafa;
    --gray-100: #f4f4f5;
    --gray-200: #e4e4e7;
    --gray-300: #d4d4d8;
    --gray-400: #a1a1aa;
    --gray-500: #71717a;
    --gray-600: #52525b;
    --gray-700: #3f3f46;
    --gray-800: #27272a;
    --gray-900: #18181b;
    
    /* Semantic colors */
    --success-color: #22c55e;
    --warning-color: #eab308;
    --error-color: #ef4444;
    --info-color: #3b82f6;
    
    /* Light mode backgrounds */
    --background-primary: #fafafa;
    --background-secondary: #ffffff;
    --background-tertiary: #f4f4f5;
    
    /* Light mode text */
    --text-primary: #18181b;
    --text-secondary: #52525b;
    --text-muted: #a1a1aa;
    
    /* Borders and shadows */
    --border-color: #e4e4e7;
    --border-subtle: #f4f4f5;
    
    /* Shadows - very soft */
    --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.04);
    --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.04);
    --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.08);
    
    /* Border radius */
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-xl: 24px;
    
    /* User message - subtle warm tint */
    --user-bg: linear-gradient(135deg, #f97316 0%, #fb923c 100%);
    --user-text: #ffffff;
    
    /* Assistant message - very soft, barely visible */
    --assistant-bg: #ffffff;
    --assistant-border: #f4f4f5;
}

/* ----- DARK MODE ----- */
[data-theme="dark"],
.dark,
html.dark {
    --primary-color: #fb923c;
    --primary-hover: #f97316;
    --primary-light: #fdba74;
    --primary-subtle: rgba(251, 146, 60, 0.1);
    
    /* Dark mode backgrounds */
    --background-primary: #0a0a0b;
    --background-secondary: #18181b;
    --background-tertiary: #27272a;
    
    /* Dark mode text */
    --text-primary: #fafafa;
    --text-secondary: #a1a1aa;
    --text-muted: #71717a;
    
    /* Dark borders */
    --border-color: #27272a;
    --border-subtle: #3f3f46;
    
    /* Dark shadows */
    --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.2);
    --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.2);
    --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.3);
    --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.4);
    
    /* User message in dark mode */
    --user-bg: linear-gradient(135deg, #ea580c 0%, #f97316 100%);
    --user-text: #ffffff;
    
    /* Assistant message in dark mode - subtle */
    --assistant-bg: #1f1f23;
    --assistant-border: #2a2a2e;
}

/* ----- Global Styles ----- */
* {
    box-sizing: border-box;
}

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
    background-color: var(--background-primary) !important;
    color: var(--text-primary);
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* ----- Header ----- */
header,
[class*="header"] {
    background: var(--background-secondary) !important;
    border-bottom: 1px solid var(--border-color) !important;
    box-shadow: var(--shadow-xs) !important;
}

/* ----- Sidebar ----- */
[class*="sidebar"],
.MuiDrawer-paper {
    background-color: var(--background-secondary) !important;
    border-right: 1px solid var(--border-color) !important;
}

/* ----- CHAT MESSAGES - SOFT STYLING ----- */

/* User messages - warm orange gradient, but soft */
[class*="userMessage"],
[data-testid="user-message"],
.user-message {
    background: var(--user-bg) !important;
    color: var(--user-text) !important;
    border-radius: var(--radius-lg) var(--radius-lg) var(--radius-sm) var(--radius-lg) !important;
    padding: 14px 18px !important;
    box-shadow: var(--shadow-sm) !important;
    margin-left: auto !important;
    max-width: 75% !important;
    border: none !important;
}

/* Assistant messages - very subtle, blends with background */
[class*="assistantMessage"],
[data-testid="assistant-message"],
.assistant-message {
    background-color: var(--assistant-bg) !important;
    border: 1px solid var(--assistant-border) !important;
    border-radius: var(--radius-lg) var(--radius-lg) var(--radius-lg) var(--radius-sm) !important;
    padding: 14px 18px !important;
    box-shadow: none !important;
    max-width: 85% !important;
    color: var(--text-primary) !important;
}

/* Remove harsh backgrounds from message containers */
[class*="messageRow"],
[class*="message-row"] {
    background: transparent !important;
}

/* Message content */
[class*="messageContent"] {
    color: inherit !important;
}

[class*="messageContent"] p {
    line-height: 1.7 !important;
    margin-bottom: 0.6em !important;
    color: inherit !important;
}

/* ----- Code Blocks ----- */
[class*="messageContent"] pre,
.message-content pre,
pre {
    background-color: var(--gray-900) !important;
    border-radius: var(--radius-md) !important;
    padding: 16px 20px !important;
    overflow-x: auto !important;
    box-shadow: var(--shadow-xs) !important;
    border: 1px solid var(--gray-800) !important;
    margin: 12px 0 !important;
}

[class*="messageContent"] code,
.message-content code,
code {
    font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace !important;
    font-size: 0.875em !important;
}

/* Inline code - soft orange tint */
[class*="messageContent"] p code,
.message-content p code,
p code {
    background-color: var(--primary-subtle) !important;
    color: var(--primary-700) !important;
    padding: 3px 7px !important;
    border-radius: 6px !important;
    font-size: 0.85em !important;
    border: 1px solid var(--primary-200) !important;
}

[data-theme="dark"] [class*="messageContent"] p code,
[data-theme="dark"] p code,
.dark p code {
    background-color: rgba(251, 146, 60, 0.15) !important;
    color: var(--primary-300) !important;
    border-color: rgba(251, 146, 60, 0.3) !important;
}

/* ----- Input Area ----- */
[class*="composer"],
[class*="inputArea"],
.message-composer {
    background-color: var(--background-secondary) !important;
    border: 1px solid var(--border-color) !important;
    border-radius: var(--radius-lg) !important;
    box-shadow: none !important;
    transition: all 0.2s ease !important;
    outline: none !important;
}

[class*="composer"]:focus-within,
[class*="inputArea"]:focus-within,
[class*="composer"]:focus,
[class*="inputArea"]:focus {
    border-color: var(--gray-300) !important;
    box-shadow: none !important;
    outline: none !important;
}

/* Remove all focus rings from textarea and inputs */
textarea,
textarea:focus,
textarea:focus-visible,
textarea:active,
[class*="composer"] textarea,
[class*="composer"] textarea:focus,
[class*="composer"] textarea:focus-visible,
[class*="inputArea"] textarea,
[class*="inputArea"] textarea:focus,
[class*="inputArea"] textarea:focus-visible,
input:focus,
input:focus-visible {
    outline: none !important;
    box-shadow: none !important;
    border-color: transparent !important;
}

/* Override MUI focus styles */
.MuiOutlinedInput-root.Mui-focused .MuiOutlinedInput-notchedOutline,
.MuiInputBase-root.Mui-focused,
.MuiInput-underline:after,
.MuiFilledInput-underline:after {
    border-color: var(--gray-300) !important;
    box-shadow: none !important;
}

textarea,
[class*="composer"] textarea {
    font-size: 15px !important;
    line-height: 1.6 !important;
    font-family: 'Inter', sans-serif !important;
}

/* ----- Buttons ----- */
button[type="submit"],
.send-button,
[class*="sendButton"] {
    background: linear-gradient(135deg, var(--primary-500) 0%, var(--primary-400) 100%) !important;
    color: white !important;
    border: none !important;
    border-radius: var(--radius-md) !important;
    padding: 10px 20px !important;
    font-weight: 600 !important;
    font-family: 'Inter', sans-serif !important;
    transition: all 0.2s ease !important;
    box-shadow: var(--shadow-sm) !important;
}

button[type="submit"]:hover,
.send-button:hover,
[class*="sendButton"]:hover {
    background: linear-gradient(135deg, var(--primary-600) 0%, var(--primary-500) 100%) !important;
    transform: translateY(-1px) !important;
    box-shadow: var(--shadow-md) !important;
}

button[type="submit"]:active,
.send-button:active {
    transform: translateY(0) !important;
}

/* Secondary/outline buttons */
button:not([type="submit"]),
.MuiButton-outlined {
    border-radius: var(--radius-sm) !important;
    transition: all 0.15s ease !important;
    font-family: 'Inter', sans-serif !important;
}

/* ----- Tool Calls / Steps ----- */
[class*="step"],
[class*="toolCall"],
.tool-call {
    background-color: var(--background-tertiary) !important;
    border: 1px solid var(--border-color) !important;
    border-left: 3px solid var(--primary-400) !important;
    border-radius: var(--radius-md) !important;
    padding: 12px 16px !important;
    margin: 10px 0 !important;
}

/* ----- File Upload ----- */
[class*="fileUpload"],
[class*="dropzone"] {
    border: 2px dashed var(--border-color) !important;
    border-radius: var(--radius-lg) !important;
    background-color: var(--background-tertiary) !important;
    transition: all 0.2s ease !important;
}

[class*="fileUpload"]:hover,
[class*="dropzone"]:hover {
    border-color: var(--primary-400) !important;
    background-color: var(--primary-subtle) !important;
}

/* ----- Scrollbar ----- */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: transparent;
    border-radius: 4px;
}

::-webkit-scrollbar-thumb {
    background: var(--gray-300);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--gray-400);
}

[data-theme="dark"] ::-webkit-scrollbar-thumb {
    background: var(--gray-600);
}

[data-theme="dark"] ::-webkit-scrollbar-thumb:hover {
    background: var(--gray-500);
}

/* ----- Animations ----- */
@keyframes fadeInUp {
    from { 
        opacity: 0; 
        transform: translateY(8px); 
    }
    to { 
        opacity: 1; 
        transform: translateY(0); 
    }
}

[class*="message"] {
    animation: fadeInUp 0.25s ease-out !important;
}

/* ----- Loading ----- */
[class*="loading"],
[class*="spinner"] {
    color: var(--primary-500) !important;
}

/* ----- Links ----- */
a {
    color: var(--primary-600) !important;
    text-decoration: none !important;
    transition: color 0.15s ease !important;
}

a:hover {
    color: var(--primary-700) !important;
    text-decoration: underline !important;
}

[data-theme="dark"] a {
    color: var(--primary-400) !important;
}

[data-theme="dark"] a:hover {
    color: var(--primary-300) !important;
}

/* ----- Tables ----- */
table {
    border-collapse: collapse !important;
    width: 100% !important;
    border-radius: var(--radius-md) !important;
    overflow: hidden !important;
    margin: 16px 0 !important;
}

th {
    background: linear-gradient(135deg, var(--primary-500) 0%, var(--primary-400) 100%) !important;
    color: white !important;
    padding: 12px 16px !important;
    text-align: left !important;
    font-weight: 600 !important;
}

td {
    padding: 10px 16px !important;
    border-bottom: 1px solid var(--border-color) !important;
    background-color: var(--background-secondary) !important;
}

tr:hover td {
    background-color: var(--primary-subtle) !important;
}

/* ----- Markdown Content ----- */
[class*="markdown"] h1,
[class*="markdown"] h2,
[class*="markdown"] h3,
[class*="markdown"] h4 {
    color: var(--text-primary) !important;
    margin-top: 1.5em !important;
    margin-bottom: 0.5em !important;
    font-weight: 600 !important;
}

[class*="markdown"] h1 { font-size: 1.75em !important; }
[class*="markdown"] h2 { font-size: 1.5em !important; }
[class*="markdown"] h3 { font-size: 1.25em !important; }

[class*="markdown"] ul,
[class*="markdown"] ol {
    padding-left: 1.5em !important;
    margin: 0.8em 0 !important;
}

[class*="markdown"] li {
    margin-bottom: 0.4em !important;
    color: var(--text-primary) !important;
}

[class*="markdown"] blockquote {
    border-left: 4px solid var(--primary-400) !important;
    padding-left: 16px !important;
    margin: 1em 0 !important;
    color: var(--text-secondary) !important;
    font-style: italic !important;
    background-color: var(--primary-subtle) !important;
    padding: 12px 16px !important;
    border-radius: 0 var(--radius-sm) var(--radius-sm) 0 !important;
}

/* ----- Avatar ----- */
[class*="avatar"] {
    border-radius: 50% !important;
    box-shadow: var(--shadow-sm) !important;
    border: 2px solid var(--background-secondary) !important;
}

/* ----- New Chat Button ----- */
[class*="newChat"],
button[aria-label*="new chat" i] {
    background: linear-gradient(135deg, var(--success-color) 0%, #16a34a 100%) !important;
    color: white !important;
    border: none !important;
}

/* ----- Settings Panel ----- */
[class*="settings"] {
    background-color: var(--background-secondary) !important;
    border-radius: var(--radius-lg) !important;
    box-shadow: var(--shadow-lg) !important;
    border: 1px solid var(--border-color) !important;
}

/* ----- Toast/Notifications ----- */
[class*="toast"],
[class*="snackbar"] {
    border-radius: var(--radius-md) !important;
    box-shadow: var(--shadow-lg) !important;
    font-family: 'Inter', sans-serif !important;
}

/* ----- Empty/Welcome State ----- */
[class*="emptyState"],
[class*="welcome"] {
    text-align: center !important;
    padding: 60px 24px !important;
}

/* ----- Mobile ----- */
@media (max-width: 768px) {
    [class*="userMessage"],
    [class*="assistantMessage"] {
        max-width: 92% !important;
    }
    
    header {
        padding: 12px 16px !important;
    }
    
    [class*="composer"] {
        border-radius: var(--radius-md) !important;
    }
}

/* ----- Focus States ----- */
button:focus-visible,
a:focus-visible {
    outline: 2px solid var(--primary-400) !important;
    outline-offset: 2px !important;
}

/* No focus outline on inputs */
input:focus-visible,
textarea:focus-visible,
input:focus,
textarea:focus {
    outline: none !important;
    box-shadow: none !important;
}

/* ----- Selection ----- */
::selection {
    background-color: var(--primary-200);
    color: var(--primary-900);
}

[data-theme="dark"] ::selection {
    background-color: rgba(251, 146, 60, 0.3);
    color: var(--text-primary);
}
